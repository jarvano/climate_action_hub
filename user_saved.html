<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Saved Analyses - Climate Action Hub</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .saved-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar (same as dashboard) */
        .sidebar {
            width: 280px;
            background: rgba(44, 62, 80, 0.95);
            backdrop-filter: blur(10px);
            color: white;
            padding: 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }
        
        .sidebar-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .sidebar-logo {
            font-size: 24px;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 10px;
        }
        
        .user-info {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .user-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2980b9);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 24px;
            color: white;
        }
        
        .user-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .user-role {
            font-size: 12px;
            color: #bdc3c7;
        }
        
        .sidebar-nav {
            list-style: none;
        }
        
        .sidebar-nav li {
            margin-bottom: 5px;
        }
        
        .sidebar-nav a {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: #ecf0f1;
            text-decoration: none;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .sidebar-nav a:hover,
        .sidebar-nav a.active {
            background: rgba(52, 152, 219, 0.2);
            color: #3498db;
            transform: translateX(5px);
        }
        
        .sidebar-nav i {
            margin-right: 10px;
            width: 16px;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 20px;
        }
        
        .saved-header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .saved-title h1 {
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .saved-title p {
            color: #7f8c8d;
            font-size: 14px;
        }
        
        .saved-controls {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .search-box {
            position: relative;
            display: flex;
            align-items: center;
        }
        
        .search-input {
            padding: 10px 40px 10px 15px;
            border: 2px solid #ecf0f1;
            border-radius: 25px;
            background: white;
            font-size: 14px;
            width: 250px;
        }
        
        .search-icon {
            position: absolute;
            right: 15px;
            color: #7f8c8d;
            cursor: pointer;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
        }
        
        .btn-secondary {
            background: rgba(255,255,255,0.9);
            color: #2c3e50;
            border: 1px solid #ddd;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        /* Filters Bar */
        .filters-bar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            align-items: end;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        .filter-label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #2c3e50;
            font-size: 14px;
        }
        
        .filter-select, .filter-input {
            padding: 10px 12px;
            border: 2px solid #ecf0f1;
            border-radius: 8px;
            background: white;
            font-size: 14px;
        }
        
        /* Saved Analyses Grid */
        .saved-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .analysis-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.2);
            position: relative;
        }
        
        .analysis-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        
        .analysis-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }
        
        .analysis-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
            line-height: 1.3;
        }
        
        .analysis-type {
            display: inline-block;
            padding: 4px 8px;
            background: rgba(52, 152, 219, 0.1);
            color: #3498db;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .analysis-type.emissions { background: rgba(231, 76, 60, 0.1); color: #e74c3c; }
        .analysis-type.renewable { background: rgba(39, 174, 96, 0.1); color: #27ae60; }
        .analysis-type.policy { background: rgba(243, 156, 18, 0.1); color: #f39c12; }
        .analysis-type.forecast { background: rgba(155, 89, 182, 0.1); color: #9b59b6; }
        
        .analysis-actions {
            display: flex;
            gap: 5px;
        }
        
        .action-btn {
            width: 32px;
            height: 32px;
            border: none;
            border-radius: 6px;
            background: rgba(255,255,255,0.9);
            color: #7f8c8d;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .action-btn:hover {
            background: #3498db;
            color: white;
            transform: scale(1.1);
        }
        
        .action-btn.delete:hover {
            background: #e74c3c;
            color: white;
        }
        
        .analysis-content {
            margin-bottom: 15px;
        }
        
        .analysis-description {
            color: #7f8c8d;
            font-size: 14px;
            line-height: 1.5;
            margin-bottom: 10px;
        }
        
        .analysis-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: rgba(255,255,255,0.5);
            border-radius: 6px;
            font-size: 13px;
        }
        
        .metric-label {
            color: #7f8c8d;
            font-weight: 500;
        }
        
        .metric-value {
            color: #2c3e50;
            font-weight: 600;
        }
        
        .analysis-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid rgba(0,0,0,0.1);
        }
        
        .analysis-date {
            color: #95a5a6;
            font-size: 12px;
        }
        
        .analysis-status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .status-dot.completed { background: #27ae60; }
        .status-dot.in-progress { background: #f39c12; }
        .status-draft { background: #95a5a6; }
        
        .status-text.completed { color: #27ae60; }
        .status-text.in-progress { color: #f39c12; }
        .status-text.draft { color: #95a5a6; }
        
        /* Quick Actions */
        .quick-actions {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .action-card {
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(39, 174, 96, 0.1));
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .action-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }
        
        .action-icon {
            font-size: 32px;
            margin-bottom: 10px;
            color: #3498db;
        }
        
        .action-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .action-description {
            font-size: 12px;
            color: #7f8c8d;
        }
        
        /* Empty State */
        .empty-state {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 60px 20px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }
        
        .empty-icon {
            font-size: 64px;
            color: #bdc3c7;
            margin-bottom: 20px;
        }
        
        .empty-title {
            font-size: 24px;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .empty-description {
            color: #7f8c8d;
            margin-bottom: 30px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .modal-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            color: #7f8c8d;
            cursor: pointer;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .saved-grid {
                grid-template-columns: 1fr;
            }
            
            .saved-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .filters-grid {
                grid-template-columns: 1fr;
            }
            
            .search-input {
                width: 100%;
            }
        }
        
        /* Loading Animation */
        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }
        
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }
        
        .alert-success {
            background: rgba(39, 174, 96, 0.1);
            border: 1px solid rgba(39, 174, 96, 0.3);
            color: #27ae60;
        }
        
        .alert-error {
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid rgba(231, 76, 60, 0.3);
            color: #e74c3c;
        }
    </style>
</head>
<body>
    <div class="saved-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">üåç Climate Action Hub</div>
            </div>
            
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-name" id="userName">John Doe</div>
                <div class="user-role">Climate Advocate</div>
            </div>
            
            <ul class="sidebar-nav">
                <li><a href="user_dashboard.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="user_profile.html"><i class="fas fa-user-circle"></i> Profile</a></li>
                <li><a href="preferences.html"><i class="fas fa-cog"></i> Preferences</a></li>
                <li><a href="user_analytics.html"><i class="fas fa-chart-line"></i> My Analytics</a></li>
                <li><a href="#" class="active"><i class="fas fa-bookmark"></i> Saved Analyses</a></li>
                <li><a href="dashboard.html" target="_blank"><i class="fas fa-globe"></i> Global Dashboard</a></li>
                <li><a href="insights.html" target="_blank"><i class="fas fa-lightbulb"></i> Insights</a></li>
                <li><a href="forecast.html" target="_blank"><i class="fas fa-crystal-ball"></i> Forecast</a></li>
                <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
            </ul>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <div class="saved-header">
                <div class="saved-title">
                    <h1>My Saved Analyses</h1>
                    <p>Access and manage your saved climate analyses</p>
                </div>
                <div class="saved-controls">
                    <div class="search-box">
                        <input type="text" class="search-input" id="searchInput" placeholder="Search analyses..." onkeyup="searchAnalyses()">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    <button class="btn btn-primary" onclick="createNewAnalysis()">
                        <i class="fas fa-plus"></i> New Analysis
                    </button>
                    <button class="btn btn-secondary" onclick="importAnalysis()">
                        <i class="fas fa-upload"></i> Import
                    </button>
                </div>
            </div>
            
            <!-- Alert Messages -->
            <div id="successAlert" class="alert alert-success">
                <i class="fas fa-check-circle"></i> Analysis saved successfully!
            </div>
            
            <div id="errorAlert" class="alert alert-error">
                <i class="fas fa-exclamation-circle"></i> Error loading analyses. Please try again.
            </div>
            
            <!-- Quick Actions -->
            <div class="quick-actions">
                <h3 style="margin-bottom: 15px; color: #2c3e50;">Quick Actions</h3>
                <div class="actions-grid">
                    <div class="action-card" onclick="createNewAnalysis()">
                        <div class="action-icon">üìä</div>
                        <div class="action-title">Create New Analysis</div>
                        <div class="action-description">Start a fresh climate analysis</div>
                    </div>
                    <div class="action-card" onclick="viewRecentAnalyses()">
                        <div class="action-icon">üïê</div>
                        <div class="action-title">Recent Analyses</div>
                        <div class="action-description">View your latest work</div>
                    </div>
                    <div class="action-card" onclick="exportAllAnalyses()">
                        <div class="action-icon">üì§</div>
                        <div class="action-title">Export All</div>
                        <div class="action-description">Download all analyses</div>
                    </div>
                    <div class="action-card" onclick="organizeAnalyses()">
                        <div class="action-icon">üìÅ</div>
                        <div class="action-title">Organize</div>
                        <div class="action-description">Manage your collections</div>
                    </div>
                </div>
            </div>
            
            <!-- Filters -->
            <div class="filters-bar">
                <div class="filters-grid">
                    <div class="filter-group">
                        <label class="filter-label">Analysis Type</label>
                        <select class="filter-select" id="typeFilter" onchange="filterAnalyses()">
                            <option value="all">All Types</option>
                            <option value="emissions">Emissions</option>
                            <option value="renewable">Renewable Energy</option>
                            <option value="policy">Policy Impact</option>
                            <option value="forecast">Forecast</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Status</label>
                        <select class="filter-select" id="statusFilter" onchange="filterAnalyses()">
                            <option value="all">All Status</option>
                            <option value="completed">Completed</option>
                            <option value="in-progress">In Progress</option>
                            <option value="draft">Draft</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Date Range</label>
                        <select class="filter-select" id="dateFilter" onchange="filterAnalyses()">
                            <option value="all">All Time</option>
                            <option value="today">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                            <option value="year">This Year</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Sort By</label>
                        <select class="filter-select" id="sortFilter" onchange="sortAnalyses()">
                            <option value="date-desc">Date (Newest)</option>
                            <option value="date-asc">Date (Oldest)</option>
                            <option value="name-asc">Name (A-Z)</option>
                            <option value="name-desc">Name (Z-A)</option>
                            <option value="type">Type</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- Saved Analyses Grid -->
            <div class="saved-grid" id="analysesGrid">
                <!-- Analysis 1 -->
                <div class="analysis-card" data-type="emissions" data-status="completed" data-date="2024-01-15">
                    <div class="analysis-header">
                        <div>
                            <h3 class="analysis-title">EU Carbon Emissions Analysis 2024</h3>
                            <span class="analysis-type emissions">Emissions</span>
                        </div>
                        <div class="analysis-actions">
                            <button class="action-btn" onclick="viewAnalysis(1)" title="View">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn" onclick="editAnalysis(1)" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn" onclick="shareAnalysis(1)" title="Share">
                                <i class="fas fa-share"></i>
                            </button>
                            <button class="action-btn delete" onclick="deleteAnalysis(1)" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="analysis-content">
                        <p class="analysis-description">
                            Comprehensive analysis of carbon emissions trends across EU member states, including policy impact assessment and future projections.
                        </p>
                        <div class="analysis-metrics">
                            <div class="metric">
                                <span class="metric-label">Countries</span>
                                <span class="metric-value">27</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Accuracy</span>
                                <span class="metric-value">94%</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Data Points</span>
                                <span class="metric-value">1,247</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Duration</span>
                                <span class="metric-value">2.5h</span>
                            </div>
                        </div>
                    </div>
                    <div class="analysis-footer">
                        <div class="analysis-date">Last modified: Jan 15, 2024</div>
                        <div class="analysis-status">
                            <div class="status-dot completed"></div>
                            <span class="status-text completed">Completed</span>
                        </div>
                    </div>
                </div>
                
                <!-- Analysis 2 -->
                <div class="analysis-card" data-type="renewable" data-status="in-progress" data-date="2024-01-18">
                    <div class="analysis-header">
                        <div>
                            <h3 class="analysis-title">Renewable Energy Potential in Southeast Asia</h3>
                            <span class="analysis-type renewable">Renewable Energy</span>
                        </div>
                        <div class="analysis-actions">
                            <button class="action-btn" onclick="viewAnalysis(2)" title="View">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn" onclick="editAnalysis(2)" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn" onclick="shareAnalysis(2)" title="Share">
                                <i class="fas fa-share"></i>
                            </button>
                            <button class="action-btn delete" onclick="deleteAnalysis(2)" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="analysis-content">
                        <p class="analysis-description">
                            Assessment of renewable energy capacity and implementation feasibility across Southeast Asian nations, focusing on solar and wind potential.
                        </p>
                        <div class="analysis-metrics">
                            <div class="metric">
                                <span class="metric-label">Countries</span>
                                <span class="metric-value">11</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Progress</span>
                                <span class="metric-value">68%</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Data Points</span>
                                <span class="metric-value">892</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Duration</span>
                                <span class="metric-value">3.2h</span>
                            </div>
                        </div>
                    </div>
                    <div class="analysis-footer">
                        <div class="analysis-date">Last modified: Jan 18, 2024</div>
                        <div class="analysis-status">
                            <div class="status-dot in-progress"></div>
                            <span class="status-text in-progress">In Progress</span>
                        </div>
                    </div>
                </div>
                
                <!-- Analysis 3 -->
                <div class="analysis-card" data-type="policy" data-status="draft" data-date="2024-01-20">
                    <div class="analysis-header">
                        <div>
                            <h3 class="analysis-title">Carbon Pricing Policy Impact Analysis</h3>
                            <span class="analysis-type policy">Policy Impact</span>
                        </div>
                        <div class="analysis-actions">
                            <button class="action-btn" onclick="viewAnalysis(3)" title="View">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn" onclick="editAnalysis(3)" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn" onclick="shareAnalysis(3)" title="Share">
                                <i class="fas fa-share"></i>
                            </button>
                            <button class="action-btn delete" onclick="deleteAnalysis(3)" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="analysis-content">
                        <p class="analysis-description">
                            Evaluation of carbon pricing mechanisms and their effectiveness in reducing emissions while maintaining economic growth across different regions.
                        </p>
                        <div class="analysis-metrics">
                            <div class="metric">
                                <span class="metric-label">Regions</span>
                                <span class="metric-value">8</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Draft</span>
                                <span class="metric-value">15%</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Data Points</span>
                                <span class="metric-value">156</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Duration</span>
                                <span class="metric-value">0.8h</span>
                            </div>
                        </div>
                    </div>
                    <div class="analysis-footer">
                        <div class="analysis-date">Last modified: Jan 20, 2024</div>
                        <div class="analysis-status">
                            <div class="status-dot draft"></div>
                            <span class="status-text draft">Draft</span>
                        </div>
                    </div>
                </div>
                
                <!-- Analysis 4 -->
                <div class="analysis-card" data-type="forecast" data-status="completed" data-date="2024-01-12">
                    <div class="analysis-header">
                        <div>
                            <h3 class="analysis-title">Global Temperature Forecast 2024-2030</h3>
                            <span class="analysis-type forecast">Forecast</span>
                        </div>
                        <div class="analysis-actions">
                            <button class="action-btn" onclick="viewAnalysis(4)" title="View">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button class="action-btn" onclick="editAnalysis(4)" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn" onclick="shareAnalysis(4)" title="Share">
                                <i class="fas fa-share"></i>
                            </button>
                            <button class="action-btn delete" onclick="deleteAnalysis(4)" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="analysis-content">
                        <p class="analysis-description">
                            Machine learning-based temperature prediction model using historical data and current climate indicators to forecast global temperature trends.
                        </p>
                        <div class="analysis-metrics">
                            <div class="metric">
                                <span class="metric-label">Model</span>
                                <span class="metric-value">LSTM</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Accuracy</span>
                                <span class="metric-value">89%</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Data Points</span>
                                <span class="metric-value">2,847</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Duration</span>
                                <span class="metric-value">4.1h</span>
                            </div>
                        </div>
                    </div>
                    <div class="analysis-footer">
                        <div class="analysis-date">Last modified: Jan 12, 2024</div>
                        <div class="analysis-status">
                            <div class="status-dot completed"></div>
                            <span class="status-text completed">Completed</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Empty State (initially hidden) -->
            <div class="empty-state" id="emptyState" style="display: none;">
                <div class="empty-icon">üìä</div>
                <h3 class="empty-title">No Saved Analyses Yet</h3>
                <p class="empty-description">
                    Start creating climate analyses to see them saved here. Your work will be automatically saved as you progress.
                </p>
                <button class="btn btn-primary" onclick="createNewAnalysis()">
                    <i class="fas fa-plus"></i> Create First Analysis
                </button>
            </div>
            
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Loading your analyses...</p>
            </div>
        </main>
    </div>
    
    <!-- View Analysis Modal -->
    <div id="viewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Analysis Details</h3>
                <button class="close-btn" onclick="closeModal('viewModal')">&times;</button>
            </div>
            <div id="modalBody">
                <!-- Content will be loaded dynamically -->
            </div>
        </div>
    </div>
    
    <!-- Share Modal -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Share Analysis</h3>
                <button class="close-btn" onclick="closeModal('shareModal')">&times;</button>
            </div>
            <div id="shareModalBody">
                <!-- Share options will be loaded here -->
            </div>
        </div>
    </div>
    
    <script>
        // Sample data for saved analyses
        let savedAnalyses = [];
        let filteredAnalyses = [];
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializeSavedPage();
            loadSavedAnalyses();
            setupEventListeners();
        });
        
        function initializeSavedPage() {
            // Check if user is logged in
            const userData = sessionStorage.getItem('userData');
            if (userData) {
                const user = JSON.parse(userData);
                document.getElementById('userName').textContent = user.username || 'Climate Advocate';
            }
        }
        
        function loadSavedAnalyses() {
            showLoading();
            
            // Simulate loading saved analyses from localStorage or API
            setTimeout(() => {
                // Load from localStorage if available, otherwise use sample data
                const stored = localStorage.getItem('savedAnalyses');
                if (stored) {
                    savedAnalyses = JSON.parse(stored);
                } else {
                    // Use existing DOM elements as sample data
                    savedAnalyses = Array.from(document.querySelectorAll('.analysis-card')).map((card, index) => ({
                        id: index + 1,
                        title: card.querySelector('.analysis-title').textContent,
                        type: card.dataset.type,
                        status: card.dataset.status,
                        date: card.dataset.date,
                        description: card.querySelector('.analysis-description').textContent.trim(),
                        metrics: Array.from(card.querySelectorAll('.metric')).map(metric => ({
                            label: metric.querySelector('.metric-label').textContent,
                            value: metric.querySelector('.metric-value').textContent
                        }))
                    }));
                    
                    // Save to localStorage for future use
                    localStorage.setItem('savedAnalyses', JSON.stringify(savedAnalyses));
                }
                
                filteredAnalyses = [...savedAnalyses];
                hideLoading();
                
                if (savedAnalyses.length === 0) {
                    showEmptyState();
                }
            }, 1000);
        }
        
        function setupEventListeners() {
            // Search functionality
            document.getElementById('searchInput').addEventListener('input', searchAnalyses);
            
            // Filter functionality
            document.getElementById('typeFilter').addEventListener('change', filterAnalyses);
            document.getElementById('statusFilter').addEventListener('change', filterAnalyses);
            document.getElementById('dateFilter').addEventListener('change', filterAnalyses);
            document.getElementById('sortFilter').addEventListener('change', sortAnalyses);
        }
        
        function searchAnalyses() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const cards = document.querySelectorAll('.analysis-card');
            
            cards.forEach(card => {
                const title = card.querySelector('.analysis-title').textContent.toLowerCase();
                const description = card.querySelector('.analysis-description').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || description.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
        
        function filterAnalyses() {
            const typeFilter = document.getElementById('typeFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const dateFilter = document.getElementById('dateFilter').value;
            
            const cards = document.querySelectorAll('.analysis-card');
            
            cards.forEach(card => {
                let show = true;
                
                // Type filter
                if (typeFilter !== 'all' && card.dataset.type !== typeFilter) {
                    show = false;
                }
                
                // Status filter
                if (statusFilter !== 'all' && card.dataset.status !== statusFilter) {
                    show = false;
                }
                
                // Date filter (simplified)
                if (dateFilter !== 'all') {
                    const cardDate = new Date(card.dataset.date);
                    const now = new Date();
                    
                    switch(dateFilter) {
                        case 'today':
                            if (cardDate.toDateString() !== now.toDateString()) show = false;
                            break;
                        case 'week':
                            const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                            if (cardDate < weekAgo) show = false;
                            break;
                        case 'month':
                            const monthAgo = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
                            if (cardDate < monthAgo) show = false;
                            break;
                        case 'year':
                            const yearAgo = new Date(now.getTime() - 365 * 24 * 60 * 60 * 1000);
                            if (cardDate < yearAgo) show = false;
                            break;
                    }
                }
                
                card.style.display = show ? 'block' : 'none';
            });
        }
        
        function sortAnalyses() {
            const sortBy = document.getElementById('sortFilter').value;
            const grid = document.getElementById('analysesGrid');
            const cards = Array.from(grid.querySelectorAll('.analysis-card'));
            
            cards.sort((a, b) => {
                switch(sortBy) {
                    case 'date-desc':
                        return new Date(b.dataset.date) - new Date(a.dataset.date);
                    case 'date-asc':
                        return new Date(a.dataset.date) - new Date(b.dataset.date);
                    case 'name-asc':
                        return a.querySelector('.analysis-title').textContent.localeCompare(b.querySelector('.analysis-title').textContent);
                    case 'name-desc':
                        return b.querySelector('.analysis-title').textContent.localeCompare(a.querySelector('.analysis-title').textContent);
                    case 'type':
                        return a.dataset.type.localeCompare(b.dataset.type);
                    default:
                        return 0;
                }
            });
            
            // Re-append sorted cards
            cards.forEach(card => grid.appendChild(card));
        }
        
        function viewAnalysis(id) {
            const analysis = savedAnalyses.find(a => a.id === id);
            if (!analysis) return;
            
            const modalBody = document.getElementById('modalBody');
            modalBody.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #2c3e50; margin-bottom: 10px;">${analysis.title}</h4>
                    <span class="analysis-type ${analysis.type}" style="margin-bottom: 15px; display: inline-block;">${analysis.type}</span>
                    <p style="color: #7f8c8d; line-height: 1.6;">${analysis.description}</p>
                </div>
                <div style="margin-bottom: 20px;">
                    <h5 style="color: #2c3e50; margin-bottom: 10px;">Metrics</h5>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px;">
                        ${analysis.metrics.map(metric => `
                            <div class="metric">
                                <span class="metric-label">${metric.label}</span>
                                <span class="metric-value">${metric.value}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-primary" onclick="editAnalysis(${id})">
                        <i class="fas fa-edit"></i> Edit
                    </button>
                    <button class="btn btn-secondary" onclick="shareAnalysis(${id})">
                        <i class="fas fa-share"></i> Share
                    </button>
                    <button class="btn btn-secondary" onclick="exportAnalysis(${id})">
                        <i class="fas fa-download"></i> Export
                    </button>
                </div>
            `;
            
            document.getElementById('viewModal').style.display = 'block';
        }
        
        function editAnalysis(id) {
            showAlert('success', `Opening analysis ${id} for editing...`);
            closeModal('viewModal');
            // Redirect to analysis editor
            setTimeout(() => {
                window.location.href = `analysis_editor.html?id=${id}`;
            }, 1000);
        }
        
        function shareAnalysis(id) {
            const analysis = savedAnalyses.find(a => a.id === id);
            if (!analysis) return;
            
            const shareModalBody = document.getElementById('shareModalBody');
            shareModalBody.innerHTML = `
                <div style="margin-bottom: 20px;">
                    <h4 style="color: #2c3e50; margin-bottom: 10px;">Share: ${analysis.title}</h4>
                    <p style="color: #7f8c8d; margin-bottom: 15px;">Choose how you'd like to share this analysis:</p>
                </div>
                <div style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="btn btn-primary" onclick="shareViaLink(${id})">
                        <i class="fas fa-link"></i> Share via Link
                    </button>
                    <button class="btn btn-secondary" onclick="shareViaEmail(${id})">
                        <i class="fas fa-envelope"></i> Share via Email
                    </button>
                    <button class="btn btn-secondary" onclick="shareViaSocial(${id})">
                        <i class="fas fa-share-alt"></i> Share on Social Media
                    </button>
                    <button class="btn btn-secondary" onclick="exportAnalysis(${id})">
                        <i class="fas fa-download"></i> Export as File
                    </button>
                </div>
            `;
            
            document.getElementById('shareModal').style.display = 'block';
        }
        
        function deleteAnalysis(id) {
            if (confirm('Are you sure you want to delete this analysis? This action cannot be undone.')) {
                // Remove from saved analyses
                savedAnalyses = savedAnalyses.filter(a => a.id !== id);
                localStorage.setItem('savedAnalyses', JSON.stringify(savedAnalyses));
                
                // Remove from DOM
                const card = document.querySelector(`[onclick="viewAnalysis(${id})"]`).closest('.analysis-card');
                card.remove();
                
                showAlert('success', 'Analysis deleted successfully!');
                
                if (savedAnalyses.length === 0) {
                    showEmptyState();
                }
            }
        }
        
        function createNewAnalysis() {
            showAlert('success', 'Creating new analysis...');
            setTimeout(() => {
                window.location.href = 'analysis_editor.html';
            }, 1000);
        }
        
        function importAnalysis() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json,.csv,.xlsx';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    showAlert('success', `Importing ${file.name}...`);
                    // Simulate import process
                    setTimeout(() => {
                        showAlert('success', 'Analysis imported successfully!');
                        loadSavedAnalyses(); // Refresh the list
                    }, 2000);
                }
            };
            input.click();
        }
        
        function exportAnalysis(id) {
            const analysis = savedAnalyses.find(a => a.id === id);
            if (!analysis) return;
            
            const data = JSON.stringify(analysis, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `analysis-${id}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showAlert('success', 'Analysis exported successfully!');
        }
        
        function exportAllAnalyses() {
            const data = JSON.stringify(savedAnalyses, null, 2);
            const blob = new Blob([data], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'all-analyses.json';
            a.click();
            URL.revokeObjectURL(url);
            
            showAlert('success', 'All analyses exported successfully!');
        }
        
        function viewRecentAnalyses() {
            // Sort by date and show only recent ones
            document.getElementById('sortFilter').value = 'date-desc';
            document.getElementById('dateFilter').value = 'week';
            sortAnalyses();
            filterAnalyses();
            showAlert('success', 'Showing recent analyses from this week.');
        }
        
        function organizeAnalyses() {
            showAlert('info', 'Organization feature coming soon!');
        }
        
        function shareViaLink(id) {
            const link = `${window.location.origin}/shared-analysis/${id}`;
            navigator.clipboard.writeText(link).then(() => {
                showAlert('success', 'Share link copied to clipboard!');
            });
            closeModal('shareModal');
        }
        
        function shareViaEmail(id) {
            const analysis = savedAnalyses.find(a => a.id === id);
            const subject = encodeURIComponent(`Climate Analysis: ${analysis.title}`);
            const body = encodeURIComponent(`Check out this climate analysis: ${analysis.title}\n\n${analysis.description}\n\nView it here: ${window.location.origin}/shared-analysis/${id}`);
            window.open(`mailto:?subject=${subject}&body=${body}`);
            closeModal('shareModal');
        }
        
        function shareViaSocial(id) {
            const analysis = savedAnalyses.find(a => a.id === id);
            const text = encodeURIComponent(`Check out this climate analysis: ${analysis.title}`);
            const url = encodeURIComponent(`${window.location.origin}/shared-analysis/${id}`);
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`);
            closeModal('shareModal');
        }
        
        function showEmptyState() {
            document.getElementById('analysesGrid').style.display = 'none';
            document.getElementById('emptyState').style.display = 'block';
        }
        
        function showLoading() {
            document.getElementById('loading').style.display = 'block';
        }
        
        function hideLoading() {
            document.getElementById('loading').style.display = 'none';
        }
        
        function showAlert(type, message) {
            const alertElement = document.getElementById(type + 'Alert') || document.getElementById('successAlert');
            alertElement.textContent = message;
            alertElement.style.display = 'block';
            
            setTimeout(() => {
                alertElement.style.display = 'none';
            }, 5000);
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        function logout() {
            sessionStorage.removeItem('userData');
            alert('You have been logged out successfully.');
            window.location.href = 'index.html';
        }
        
        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
    </script>
</body>
</html>